<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Anki iOS - Spaced Repetition</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/editor.css">
    <link rel="stylesheet" href="css/themes.css">
    
    <!-- MathJax -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']],
                processEscapes: true,
                packages: ['base', 'ams', 'noerrors', 'noundefined']
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            startup: {
                ready: () => {
                    MathJax.startup.defaultReady();
                    MathJax.startup.promise.then(() => {
                        console.log('MathJax loaded');
                    });
                }
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" async></script>
</head>
<body>
    <!-- App Container -->
    <div id="app">
        <!-- Top Navigation Bar -->
        <header class="navbar">
            <div class="navbar-left">
                <button id="menu-toggle" class="nav-btn" aria-label="Toggle menu">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </button>
                <h1 class="app-title">Anki</h1>
            </div>
            <div class="navbar-right">
                <button id="sync-btn" class="nav-btn" aria-label="Sync">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>
                    </svg>
                </button>
                <button id="add-btn" class="nav-btn" aria-label="Add card">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content Area -->
        <main id="main-content">
            <!-- Decks View (Default) -->
            <div id="decks-view" class="view active">
                <div class="decks-header">
                    <h2>Decks</h2>
                    <div class="deck-stats">
                        <span id="total-due">0 due</span>
                        <span id="total-new">0 new</span>
                    </div>
                </div>
                <div class="decks-list" id="decks-list">
                    <!-- Decks will be populated here -->
                </div>
                <div class="empty-state" id="no-decks">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86l-3 3.87L9 13.14 6 17h12l-3.86-5.14z"/>
                    </svg>
                    <h3>No decks yet</h3>
                    <p>Create your first deck to start studying</p>
                    <button id="create-first-deck" class="btn-primary">Create Deck</button>
                </div>
            </div>

            <!-- Study View -->
            <div id="study-view" class="view">
                <div class="study-header">
                    <button id="back-to-decks" class="back-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                        Back
                    </button>
                    <div class="study-deck-info">
                        <h3 id="study-deck-name">Default</h3>
                        <div class="study-progress">
                            <span id="cards-left">0 cards left</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                            </div>
                        </div>
                    </div>
                    <div class="study-actions">
                        <button id="undo-btn" class="icon-btn" aria-label="Undo">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/>
                            </svg>
                        </button>
                        <button id="more-options" class="icon-btn" aria-label="More options">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="study-content">
                    <!-- Card Display Area -->
                    <div class="card-container">
                        <div class="card" id="study-card">
                            <div class="card-content" id="card-question">
                                <!-- Question content will be injected here -->
                            </div>
                            <div class="card-answer" id="card-answer">
                                <!-- Answer content will be injected here -->
                            </div>
                        </div>
                        
                        <!-- Gesture Hints -->
                        <div class="gesture-hints">
                            <div class="hint" data-action="again">
                                <span class="hint-badge">Again</span>
                                <span class="hint-text">Swipe left</span>
                            </div>
                            <div class="hint" data-action="hard">
                                <span class="hint-badge">Hard</span>
                                <span class="hint-text">Swipe down</span>
                            </div>
                            <div class="hint" data-action="good">
                                <span class="hint-badge">Good</span>
                                <span class="hint-text">Swipe up</span>
                            </div>
                            <div class="hint" data-action="easy">
                                <span class="hint-badge">Easy</span>
                                <span class="hint-text">Swipe right</span>
                            </div>
                        </div>
                    </div>

                    <!-- Answer Buttons (Visible after showing answer) -->
                    <div class="answer-buttons" id="answer-buttons">
                        <button class="answer-btn again" data-ease="1">
                            <span class="btn-text">Again</span>
                            <span class="btn-time">1m</span>
                        </button>
                        <button class="answer-btn hard" data-ease="2">
                            <span class="btn-text">Hard</span>
                            <span class="btn-time">1d</span>
                        </button>
                        <button class="answer-btn good" data-ease="3">
                            <span class="btn-text">Good</span>
                            <span class="btn-time">3d</span>
                        </button>
                        <button class="answer-btn easy" data-ease="4">
                            <span class="btn-text">Easy</span>
                            <span class="btn-time">4d</span>
                        </button>
                    </div>

                    <!-- Show Answer Button -->
                    <button class="show-answer-btn" id="show-answer">
                        Show Answer
                        <div class="tap-hint">Tap anywhere</div>
                    </button>
                </div>
            </div>

            <!-- Editor View -->
            <div id="editor-view" class="view">
                <div class="editor-header">
                    <button class="back-btn" id="back-from-editor">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                        Cancel
                    </button>
                    <h3 id="editor-title">Add Card</h3>
                    <button class="btn-primary" id="save-card">Save</button>
                </div>

                <div class="editor-content">
                    <div class="editor-toolbar">
                        <select id="note-type-selector">
                            <option value="basic">Basic</option>
                            <option value="basic-reverse">Basic (and reverse)</option>
                            <option value="basic-optional-reverse">Basic (optional reverse)</option>
                            <option value="cloze">Cloze</option>
                        </select>
                        <select id="deck-selector">
                            <!-- Decks will be populated -->
                        </select>
                        <div class="toolbar-buttons">
                            <button class="toolbar-btn" data-format="bold" title="Bold">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" data-format="italic" title="Italic">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" data-format="underline" title="Underline">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" data-format="latex" title="Insert LaTeX">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M5 4v3h5.5v12h3V7H19V4z"/>
                                </svg>
                            </button>
                            <button class="toolbar-btn" data-format="cloze" title="Cloze deletion">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="editor-fields">
                        <!-- Fields will be generated based on note type -->
                    </div>

                    <div class="editor-preview">
                        <h4>Preview</h4>
                        <div class="preview-card" id="editor-preview">
                            <!-- Preview will be updated in real-time -->
                        </div>
                    </div>

                    <div class="editor-tags">
                        <input type="text" id="tag-input" placeholder="Add tags (separate with space)">
                        <div class="tags-list" id="tags-list"></div>
                    </div>
                </div>
            </div>

            <!-- Browser View -->
            <div id="browser-view" class="view">
                <div class="browser-header">
                    <button class="back-btn" id="back-from-browser">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                        Back
                    </button>
                    <div class="search-box">
                        <input type="text" id="card-search" placeholder="Search cards...">
                        <button class="search-btn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                        </button>
                    </div>
                    <button class="icon-btn" id="browser-options">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                        </svg>
                    </button>
                </div>

                <div class="browser-controls">
                    <select id="browser-deck-filter">
                        <option value="all">All Decks</option>
                    </select>
                    <select id="browser-sort">
                        <option value="due">Due Date</option>
                        <option value="created">Created</option>
                        <option value="modified">Modified</option>
                        <option value="ease">Ease</option>
                        <option value="interval">Interval</option>
                    </select>
                    <button class="btn-secondary" id="select-cards">Select</button>
                </div>

                <div class="browser-content">
                    <div class="cards-list" id="cards-list">
                        <!-- Cards will be populated here -->
                    </div>
                    <div class="empty-state" id="no-cards-found">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                        </svg>
                        <h3>No cards found</h3>
                        <p>Try a different search or create new cards</p>
                    </div>
                </div>
            </div>

            <!-- Settings View -->
            <div id="settings-view" class="view">
                <div class="settings-header">
                    <button class="back-btn" id="back-from-settings">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                        </svg>
                        Back
                    </button>
                    <h2>Settings</h2>
                </div>

                <div class="settings-content">
                    <div class="settings-section">
                        <h3>Review</h3>
                        <div class="setting-item">
                            <label>New cards/day</label>
                            <input type="number" id="new-per-day" min="1" max="1000" value="20">
                        </div>
                        <div class="setting-item">
                            <label>Maximum reviews/day</label>
                            <input type="number" id="max-reviews" min="1" max="9999" value="200">
                        </div>
                        <div class="setting-item">
                            <label>Easy bonus</label>
                            <input type="number" id="easy-bonus" min="100" max="500" step="10" value="130">
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>Display</h3>
                        <div class="setting-item">
                            <label>Card font size</label>
                            <select id="font-size">
                                <option value="small">Small</option>
                                <option value="medium" selected>Medium</option>
                                <option value="large">Large</option>
                                <option value="xlarge">Extra Large</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label>Night mode</label>
                            <label class="switch">
                                <input type="checkbox" id="night-mode" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>Data Management</h3>
                        <button class="btn-secondary" id="export-data">Export Collection</button>
                        <button class="btn-secondary" id="import-data">Import Collection</button>
                        <button class="btn-danger" id="reset-data">Reset Collection</button>
                    </div>

                    <div class="settings-section">
                        <h3>About</h3>
                        <div class="about-info">
                            <p>Anki iOS WebApp v1.0.0</p>
                            <p>Spaced repetition system based on SM-2 algorithm</p>
                            <p>Built with ❤️ for productive learning</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Tab Navigation -->
        <nav class="tab-bar">
            <button class="tab-btn active" data-view="decks">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                </svg>
                <span>Decks</span>
            </button>
            <button class="tab-btn" data-view="study">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                <span>Study</span>
            </button>
            <button class="tab-btn" data-view="browser">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-5 14H4v-4h11v4zm0-5H4V9h11v4zm5 5h-4V9h4v9z"/>
                </svg>
                <span>Browse</span>
            </button>
            <button class="tab-btn" data-view="settings">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                </svg>
                <span>Settings</span>
            </button>
        </nav>

        <!-- Side Menu (Hidden by default) -->
        <div class="side-menu" id="side-menu">
            <div class="menu-header">
                <h3>Menu</h3>
                <button class="close-menu" id="close-menu">&times;</button>
            </div>
            <div class="menu-items">
                <a href="#" class="menu-item" data-action="stats">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16,11V3H8v6H2v12h20V11H16z M10,5h4v14h-4V5z M4,11h4v8H4V11z M20,19h-4v-6h4V19z"/>
                    </svg>
                    Statistics
                </a>
                <a href="#" class="menu-item" data-action="create-deck">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"/>
                    </svg>
                    Create Deck
                </a>
                <a href="#" class="menu-item" data-action="import">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                    </svg>
                    Import
                </a>
                <a href="#" class="menu-item" data-action="export">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"/>
                    </svg>
                    Export
                </a>
                <hr>
                <a href="#" class="menu-item" data-action="help">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
                    </svg>
                    Help & Tips
                </a>
                <a href="#" class="menu-item" data-action="about">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"/>
                    </svg>
                    About
                </a>
            </div>
        </div>

        <!-- Modal Dialogs -->
        <div class="modal" id="deck-modal">
            <div class="modal-content">
                <h3 id="modal-title">Create Deck</h3>
                <input type="text" id="deck-name" placeholder="Deck name">
                <div class="modal-actions">
                    <button class="btn-secondary" id="cancel-deck">Cancel</button>
                    <button class="btn-primary" id="save-deck">Save</button>
                </div>
            </div>
        </div>

        <div class="modal" id="stats-modal">
            <div class="modal-content wide">
                <h3>Statistics</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-cards">0</div>
                        <div class="stat-label">Total Cards</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-reviews">0</div>
                        <div class="stat-label">Reviews Today</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="avg-ease">0%</div>
                        <div class="stat-label">Average Ease</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="avg-time">0s</div>
                        <div class="stat-label">Avg Time/Card</div>
                    </div>
                </div>
                <canvas id="stats-chart"></canvas>
                <button class="btn-secondary close-modal">Close</button>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toast-container"></div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loading">
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading...</div>
        </div>
    </div>

    <!-- JavaScript Files -->
    <script src="js/utils.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/scheduler.js"></script>
    <script src="js/editor.js"></script>
    <script src="js/review.js"></script>
    <script src="js/deck-manager.js"></script>
    <script src="js/search.js"></script>
    <script src="js/sync.js"></script>
    <script src="js/gestures.js"></script>
    <script src="js/app.js"></script>

    <!-- Initialize Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registered:', registration);
                    })
                    .catch(error => {
                        console.log('ServiceWorker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html>
